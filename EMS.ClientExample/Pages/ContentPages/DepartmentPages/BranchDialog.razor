@using Syncfusion.Blazor.DropDowns
<h3>BranchDialog</h3>

@code {
    [Parameter] public Branch Branch { get; set; } = new();
    [Parameter] public List<Department> Departments { get; set; } = new();
    [Parameter] public EventCallback<Branch> HandleSaveOperationEvent { get; set; }

    private bool IsVisible { get; set; } = false;
    public string Title { get; set; } = "Add";

    private async void Save()
    {
        if (string.IsNullOrEmpty(Branch.Name) || Branch.DepartmentId <= 0)
            await DialogService.AlertAsync("You need to provide Department name", "Alert!");
        else
            await HandleSaveOperationEvent.InvokeAsync(Branch);
    }

    public void OpenDialog()
    {
        IsVisible = true;
        StateHasChanged();
    }

    public void ChangeTitle(string title)
    {
        Title = title;
    }

    public void OnValueChange(ChangeEventArgs<string,Department> args )
    {
        Branch.DepartmentId = int.Parse(args.Value);
    }
}
